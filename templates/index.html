{% extends "base.html" %}

{% block title %}å­¦ç¿’è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒ {% endblock %}

{% block content %}
<!-- TOPãƒšãƒ¼ã‚¸ã§ã‚ã‚Šã€ãƒ•ã‚©ãƒ¼ãƒ ç”»é¢ -->
<form method="POST">
    <label for="id_text_name">ã‚ãªãŸã®åå‰ï¼š</label><br>
    <input type="text" name="name" id="id_text_name" value="{{ name }}"><br><br>

    <label for="id_select_category">ã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼š</label>
    <select name="category" id="id_select_category">
        <option value="å­¦ç¿’" {% if category=="å­¦ç¿’" %}selected{% endif %}>å­¦ç¿’</option>
        <option value="é›‘è«‡" {% if category=="é›‘è«‡" %}selected{% endif %}>é›‘è«‡</option>
        <option value="æ—¥è¨˜" {% if category=="æ—¥è¨˜" %}selected{% endif %}>æ—¥è¨˜</option>
    </select><br>

    <label for="id_text_message">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼š</label><br>
    <textarea name="message" id="id_text_message">{{ message }}</textarea><br><br>

    <button type="submit">è¨˜éŒ²ã™ã‚‹</button>
</form>


<h3>ğŸ“šã“ã‚Œã¾ã§ã®è¨˜éŒ²</h3>

<p><small>â€»ã“ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ãŸã®ã¯ï¼š{{ timestamp }}</small></p>

<!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ -->
<form method="GET" action="/">
    <button name="filter" value="all">ã™ã¹ã¦</button>
    <button name="filter" value="å­¦ç¿’">å­¦ç¿’</button>
    <button name="filter" value="é›‘è«‡">é›‘è«‡</button>
    <button name="filter" value="æ—¥è¨˜">æ—¥è¨˜</button>
</form><br><br>


<!-- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ -->
<form method="GET" action="/">
    <label for="search">ğŸ” ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼š</label>
    <input type="text" name="keyword" id="search" value="{{ keyword }}">
    <button type="submit">æ¤œç´¢</button>
</form>
<!-- app.pyã‹ã‚‰ã®è¿”ã‚Šã«ã‚¨ãƒ©ãƒ¼ãŒã‚ã£ãŸå ´åˆ -->
{% if error %}
<p style="color: red;">âš ï¸ {{ error }}</p>
{% endif %}


<!-- ä¸¦ã³é † -->
<form method="GET" action="/">
    <input type="hidden" name="filter" value="{{ filter }}">
    <input type="hidden" name="keyword" value="{{ keyword }}">
    <button name="sort" value="time">ğŸ•’ æ–°ã—ã„é †</button>
    <button name="sort" value="name">ğŸ”¤ åå‰é †</button>
</form>


<!-- app.pyã‹ã‚‰ã®è¿”ã£ã¦ããŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã•ã›ã‚‹ -->
{% if data %}
<ul>
    {% for id, item in data.items() %}
    <li><strong>{{ id }}. {{ item.name }}</strong>ï¼š{{item.category}}.{{ item.message }}</li>
    <small>ï¼ˆé€ä¿¡æ™‚åˆ»ï¼š{{ item.time }}ï¼‰</small>
    <form method="POST" action="/delete/{{ id }}" style="display:inline;">
        <button type="submit">å‰Šé™¤</button>
    </form>
    <form method="GET" action="/edit/{{ id }}" style="display:inline;">
        <button type="submit">ç·¨é›†</button>
    </form>
    {% endfor %}
</ul>
{% else %}
<p>ã¾ã è¨˜éŒ²ã¯ã‚ã‚Šã¾ã›ã‚“ï¼</p>
{% endif %}

{% endblock %}