{% extends "base.html" %}

{% block title %}ã‚¢ã‚·ã‚¹ãƒˆæ©Ÿèƒ½{% endblock %}

{% block content %}
<div class="container assist-container">
    <h2 class="mb-4">ğŸ¤– å­¦ç¿’ã‚¢ã‚·ã‚¹ãƒˆãƒšãƒ¼ã‚¸</h2>

    <!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
    <form method="GET" action="/assist" class="assist-form d-flex flex-wrap justify-content-center gap-3">

        <!-- ã‚¿ã‚°ã§çµã‚Šè¾¼ã¿ -->
        <div class="d-flex align-items-center gap-2">
            <label for="tag" class="form-label mb-0">ã‚¿ã‚°ã§çµã‚Šè¾¼ã¿ï¼š</label>
            <select name="tag" id="tag" class="form-select">
                <option value="">å…¨ã¦</option>
                {% for tag in tags %}
                <option value="{{ tag.name }}" {% if selected_tag==tag.name %}selected{% endif %}>{{ tag.name }}
                </option>
                {% endfor %}
            </select>
        </div>

        <!-- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ -->
        <div class="d-flex align-items-center gap-2">
            <label for="keyword" class="form-label mb-0">ğŸ” ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š</label>
            <input type="text" id="keyword" name="keyword" class="form-control" value="{{ keyword }}">
        </div>

        <!-- æ¤œç´¢ãƒœã‚¿ãƒ³ -->
        <div class="d-flex align-items-center">
            <button type="submit" class="btn btn-primary">æ¤œç´¢</button>
        </div>

    </form>


    <!-- çµæœè¡¨ç¤º -->
    {% if results %}
    <h3>ğŸ” æ¤œç´¢çµæœï¼š</h3>
    <ul class="ul_width">
        {% for id, item in results.items() %}
        <div class="assist-card mb-4 p-3 shadow-sm">

            <div class="mb-2 p-2 border rounded bg-light">
                <strong>ğŸ“Œ ãƒ¯ãƒ¼ãƒ‰ï¼š</strong><br>
                {{ item.word or "" }}
            </div>

            <div class="mb-2 p-2 border rounded bg-light memo-text">
                <strong>ğŸ“ è©³ç´°ï¼š</strong><br>
                {{ item.details or "" }}
            </div>

            <div class="mb-2 p-2 border rounded bg-light memo-text">
                <strong>ğŸ—’ ãƒ¡ãƒ¢ï¼š</strong><br>
                <pre><code>{{ item.memo or "" }}</code></pre>
            </div>

            <div class="mb-2 p-2 border rounded bg-light">
                <strong>ğŸ· ã‚¿ã‚°ï¼š</strong><br>
                {{ item.tags | join(', ') }}
            </div>

            <p class="text-end text-muted"><small>â° ç™»éŒ²æ—¥æ™‚ï¼š{{ item.time }}</small></p>

            <form method="GET" action="/edit/{{ id }}">
                <button type="submit" class="btn btn-sm btn-warning mt-2">ğŸ›  ç·¨é›†</button>
            </form>
        </div>
        {% endfor %}
    </ul>
    {% elif keyword %}
    <p>è©²å½“ã™ã‚‹çµæœã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
    {% endif %}

    <!-- <p>ã“ã“ã§ã¯ç™»éŒ²ã•ã‚ŒãŸæƒ…å ±ã‚’ã‚‚ã¨ã«ã€ã‚ãªãŸã®å­¦ç¿’ã‚’ã‚¢ã‚·ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
    <ul>
        <li>é¡ä¼¼ãƒ¯ãƒ¼ãƒ‰ã®ææ¡ˆ</li>
        <li>ã‚¿ã‚°ã‹ã‚‰ã®çµã‚Šè¾¼ã¿</li>
        <li>éå»ã®å­¦ç¿’å±¥æ­´ã®åˆ†æè¡¨ç¤º</li>
    </ul> -->

    <a href="/" class="btn btn-secondary mt-3">â† ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a>
</div>
{% endblock %}